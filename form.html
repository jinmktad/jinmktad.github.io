<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>상담 신청 | 진마케팅 LEADMAKERS</title>
  <style>
    body{font-family:-apple-system,system-ui,"Noto Sans KR",sans-serif;margin:0;display:grid;place-items:center;min-height:100vh;background:#f7f8fb;color:#111}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.06);padding:28px;max-width:560px;width:92%}
    h1{margin:0 0 10px;font-size:22px}
    p{margin:0 0 18px;color:#6b7280}
    label{display:block;margin:10px 0 6px}
    input,textarea{width:100%;padding:12px 14px;border:1px solid #d1d5db;border-radius:10px;font-size:15px}
    textarea{min-height:110px;resize:vertical}
    button{margin-top:16px;width:100%;padding:14px;border:0;border-radius:12px;background:#111827;color:#fff;font-weight:700;cursor:pointer}
    button:hover{background:#0b1220}
    .meta{margin-top:10px;color:#9ca3af;font-size:12px}
  </style>

  <script>
    // ✅ Apps Script 웹앱 URL만 교체
    const ENDPOINT = "https://script.google.com/macros/s/여기에_웹앱_URL/exec";

    function getUTM(){
      const u = new URL(location.href), g=k=>u.searchParams.get(k)||"";
      return {
        utm_source:g('utm_source'), utm_medium:g('utm_medium'),
        utm_campaign:g('utm_campaign'), utm_term:g('utm_term'),
        utm_content:g('utm_content')
      };
    }

    async function submitLead(e){
      e.preventDefault();
      const f = e.target;
      const payload = {
        name: f.name.value.trim(),
        phone: f.phone.value.trim(),
        email: f.email.value.trim(),
        message: f.message.value.trim(),
        ...getUTM(),
        referrer: document.referrer || "",
        user_agent: navigator.userAgent || "",
        page: location.href
      };

      const controller = new AbortController();
      const t = setTimeout(()=>controller.abort(), 4000);

      try{
        await fetch(ENDPOINT, {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
          signal: controller.signal
        });
      }catch(_){}
      finally{
        clearTimeout(t);
        location.href = "/thank-you.html";
      }
    }
  </script>
</head>
<body>
  <main class="card">
    <h1>상담 신청</h1>
    <p>전문가가 영업시간(월~토 09:00~18:00) 내 빠르게 연락드립니다.</p>

    <form onsubmit="submitLead(event)">
      <label>이름</label>
      <input name="name" required />

      <label>전화번호</label>
      <input name="phone" type="tel" required />

      <label>이메일 (선택)</label>
      <input name="email" type="email" />

      <label>문의 내용 (선택)</label>
      <textarea name="message" placeholder="원하시는 상담 내용을 적어주세요."></textarea>

      <button type="submit">신청하기</button>
      <div class="meta">※ 제출 즉시 완료(감사) 페이지로 이동합니다.</div>
    </form>
  </main>
</body>
</html>

